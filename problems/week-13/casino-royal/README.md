tags: Max Flow Min Cost

## Intuition
Number of stations is pretty small so we could try to solve this with a max flow min cost problem. A difficulty however is that the max flow min cost algorithm will first try to maximize the flow and in case multiple max flows exist it will pick the one with minimum cost. Thus we cannot use the number of missions as a unit of flow because missions have different priorities so the solution will not necessarily consist of the max number of missions.

The goal is thus to ensure that the flow is always going to be the same and then let the algorithm find the cheapest among them. If we think about what constraints in the problem we have that can be modeled through edges and remains constant we could think about the maximum number of agents allowed to sit on the train simultaneously. Use this as edge capacity between any two consecutive stations and give it a cost of 0. For each mission we will add an edge between the two stations it connects with a capacity of one and the cost equal to the priority.

Maximizing is equal to minimizing its negative counterpart, however too slow in this case. We need to ensure that we have positive costs by ensuring that the flow always choose the mission from i to j by taking the edge rather than just going sequentially through all stations from i to j. The cost on the edge from i to j should thus be lower than the sum of all costs between stations from i to j. However we need to be careful because we cannot simply set the costs to `max_prio - mission_prio`. We need to take the distance from i to j into account. The easiest is to assume that advancing 1 station incurs a cost of `max_prio`. Taking a mission edge from i to j which advances us by 3 stations should thus be equal to `3 * max_prio - mission_prio`. Note that it is still more beneficial to choose the mission edge for that one unit of flow because `mission_prio > 0`.
Adding `max_prio` for step a unit of flow makes forward allows us to retrieve the final result by `(n-1) * l * max_prio - min_cost_of_flow` because there are n-1 steps that we can make forward, for each of them we added `max_prio` as cost and we need to scale this by the amount of flow that flows between any two pairs of station which is always `l`.